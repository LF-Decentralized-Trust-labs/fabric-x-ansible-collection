#
# Copyright IBM Corp. All Rights Reserved.
#
# SPDX-License-Identifier: Apache-2.0
#

- name: Fetch Yugabyte TLS CA certificate
  ansible.builtin.fetch:
    src: "{{ yugabyte_remote_config_dir }}/tls/ca.crt"
    dest: "{{ fetched_artifacts_dir }}/{{ inventory_hostname }}/tls/ca.crt"
    flat: true
  when:
    - yugabyte_use_tls

- name: Fetch Yugabyte TLS certificate
  ansible.builtin.fetch:
    src: "{{ yugabyte_remote_config_dir }}/tls/node.{{ ansible_host }}.crt"
    dest: "{{ fetched_artifacts_dir }}/{{ inventory_hostname }}/tls/server.crt"
    flat: true
  when:
    - yugabyte_use_tls
