#
# Copyright IBM Corp. All Rights Reserved.
#
# SPDX-License-Identifier: Apache-2.0
#

- name: Ensure Podman is installed
  vars:
    package_name: podman
  ansible.builtin.include_role:
    name: hyperledger.fabricx.package
    tasks_from: install

- name: Verify Podman binary is available
  ansible.builtin.command: podman --version
  register: podman_check
  changed_when: podman_check.rc != 0

- name: Test podman with an hello-world container
  vars:
    container_client: podman
    container_name: podman-hello-world
    container_image: quay.io/podman/hello:latest
    container_run_detach_mode: false
    container_autoremove: true
  ansible.builtin.include_role:
    name: hyperledger.fabricx.container
    tasks_from: start
